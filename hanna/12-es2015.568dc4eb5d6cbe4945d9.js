(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{v35Q:function(t,e,n){"use strict";n.r(e),n.d(e,"CartPageModule",(function(){return D}));var i=n("ofXK"),o=n("3Pt+"),r=n("TEn/"),c=n("tyNb"),a=n("mrSG"),s=n("fXoL");function l(t,e){1&t&&(s.Lb(0,"ion-button",18),s.Lb(1,"div"),s.pc(2," Ordered Successfully, "),s.Kb(),s.Kb())}function b(t,e){if(1&t){const t=s.Mb();s.Lb(0,"ion-button",19),s.Tb("click",(function(){return s.ic(t),s.Vb().dismiss()})),s.pc(1,"Try Again"),s.Kb()}}function d(t,e){if(1&t&&(s.Lb(0,"table",23),s.Lb(1,"tr"),s.Lb(2,"td",24),s.pc(3),s.Kb(),s.Lb(4,"td",24),s.pc(5),s.Jb(6,"br"),s.pc(7,"X "),s.Jb(8,"br"),s.pc(9),s.Kb(),s.Lb(10,"td",25),s.pc(11),s.Jb(12,"br"),s.pc(13,"/"),s.Jb(14,"br"),s.pc(15),s.Kb(),s.Lb(16,"td",25),s.pc(17),s.Kb(),s.Kb(),s.Kb()),2&t){const t=s.Vb().$implicit,e=s.Vb().$implicit;s.xb(3),s.qc(e.name),s.xb(2),s.rc("",t.selected," "),s.xb(4),s.qc(t.unit),s.xb(2),s.rc("",t.price," "),s.xb(4),s.rc(" ",t.unit,""),s.xb(2),s.rc("Rs ",t.price*t.selected,"")}}function g(t,e){if(1&t&&(s.Lb(0,"span"),s.nc(1,d,18,6,"table",22),s.Kb()),2&t){const t=e.$implicit;s.xb(1),s.bc("ngIf",t&&t.selected&&t.selected>0)}}function p(t,e){if(1&t&&(s.Lb(0,"ion-card",20),s.nc(1,g,2,1,"span",21),s.Kb()),2&t){const t=e.$implicit;s.xb(1),s.bc("ngForOf",t.variants)}}let h=(()=>{class t{constructor(t){this.modalCtrl=t,this.data={},this.totals=0,this.delivery={},this.error=!1,this.status="ok"}ngOnInit(){console.log(this.data)}dismiss(){this.modalCtrl.dismiss({dismissed:!0})}}return t.\u0275fac=function(e){return new(e||t)(s.Ib(r.Y))},t.\u0275cmp=s.Cb({type:t,selectors:[["app-place-order"]],inputs:{data:"data",totals:"totals",delivery:"delivery",error:"error"},decls:59,vars:8,consts:[["vertical","top","horizontal","end","slot","fixed","routerLink","/home"],["name","close-outline"],["slot","start"],[1,"totals"],[1,"totalsTxt"],["size","12"],["color","success","routerLink","/home","style","width: 100%;","class","btnStyle",4,"ngIf"],["color","warning","style","width: 100%;","class","btnStyle",3,"click",4,"ngIf"],[2,"margin","3px 10px"],[1,"callu"],[1,"detTxt"],["href","https://api.whatsapp.com/send/?phone=917871485184"],[1,"detTxt",2,"color","darkgoldenrod"],["size","12",2,"padding","0px","padding-top","10px","padding-left","10px"],[2,"margin","0px"],["style","margin: 10px; padding-bottom: 10px;",4,"ngFor","ngForOf"],[1,"summary"],["colspan","2",2,"font-weight","600"],["color","success","routerLink","/home",1,"btnStyle",2,"width","100%"],["color","warning",1,"btnStyle",2,"width","100%",3,"click"],[2,"margin","10px","padding-bottom","10px"],[4,"ngFor","ngForOf"],["class","orderDet",4,"ngIf"],[1,"orderDet"],["width","30%"],["width","20%"]],template:function(t,e){1&t&&(s.Lb(0,"ion-fab",0),s.Lb(1,"ion-fab-button"),s.Jb(2,"ion-icon",1),s.Kb(),s.Kb(),s.Lb(3,"ion-header"),s.Lb(4,"ion-toolbar"),s.Lb(5,"ion-buttons",2),s.Jb(6,"ion-back-button"),s.Kb(),s.Lb(7,"ion-title"),s.pc(8,"Order"),s.Kb(),s.Kb(),s.Kb(),s.Lb(9,"ion-header"),s.Lb(10,"ion-toolbar"),s.Lb(11,"div",3),s.Lb(12,"div",4),s.pc(13),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Lb(14,"ion-content"),s.Lb(15,"ion-row"),s.Lb(16,"ion-col",5),s.nc(17,l,3,0,"ion-button",6),s.Kb(),s.Lb(18,"ion-col",5),s.nc(19,b,2,0,"ion-button",7),s.Kb(),s.Lb(20,"ion-col",5),s.Lb(21,"ion-card",8),s.Lb(22,"h2",9),s.pc(23,"We will CALL you to Confirm Order"),s.Kb(),s.Lb(24,"h4",10),s.pc(25,"Thank you for placing the order."),s.Kb(),s.Lb(26,"a",11),s.Lb(27,"h6",12),s.pc(28,"For details contact us at Whatsapp 7871485184."),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Lb(29,"ion-row"),s.Lb(30,"ion-col",13),s.Lb(31,"h6",14),s.pc(32,"Order Summary"),s.Kb(),s.Kb(),s.Lb(33,"ion-col",5),s.nc(34,p,2,1,"ion-card",15),s.Lb(35,"table",16),s.Lb(36,"tr"),s.Lb(37,"td",17),s.pc(38,"Delivery details"),s.Kb(),s.Kb(),s.Lb(39,"tr"),s.Lb(40,"td"),s.pc(41,"Name"),s.Kb(),s.Lb(42,"td"),s.pc(43),s.Kb(),s.Kb(),s.Lb(44,"tr"),s.Lb(45,"td"),s.pc(46,"Address"),s.Kb(),s.Lb(47,"td"),s.pc(48),s.Kb(),s.Kb(),s.Lb(49,"tr"),s.Lb(50,"td"),s.pc(51,"Pin Code"),s.Kb(),s.Lb(52,"td"),s.pc(53),s.Kb(),s.Kb(),s.Lb(54,"tr"),s.Lb(55,"td"),s.pc(56,"Phone"),s.Kb(),s.Lb(57,"td"),s.pc(58),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Kb()),2&t&&(s.xb(13),s.rc("Total Cost - Rs.",e.totals,""),s.xb(4),s.bc("ngIf",!e.error),s.xb(2),s.bc("ngIf",e.error),s.xb(15),s.bc("ngForOf",e.data),s.xb(9),s.qc(e.delivery.name),s.xb(5),s.qc(e.delivery.address),s.xb(5),s.qc(e.delivery.pincode),s.xb(5),s.qc(e.delivery.phone))},directives:[r.p,r.ab,c.h,r.q,r.u,r.t,r.U,r.i,r.e,r.f,r.T,r.o,r.H,r.n,i.k,r.j,i.j,r.h],styles:[".totals[_ngcontent-%COMP%]{font-weight:600;font-size:20px}.totals[_ngcontent-%COMP%]   .totalsTxt[_ngcontent-%COMP%]{padding-top:3%;font-size:large;width:50%;display:inline-block;vertical-align:middle}.orderDet[_ngcontent-%COMP%]{width:90%;margin-left:5%;margin-right:5%;color:#666;line-height:1.6;margin-top:3%;text-align:center}.orderDet[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .orderDet[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:1px solid #d7d8da;padding-top:3px;padding-left:3px}.btnStyle[_ngcontent-%COMP%]{width:100%;font-weight:600;font-size:30px}.summary[_ngcontent-%COMP%]{width:100%;font-size:1rem;color:#666;line-height:1.6;margin-top:7%;text-align:center}.summary[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .summary[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:1px solid #d7d8da;padding-top:3px}.detTxt[_ngcontent-%COMP%]{padding:1px 10px}.callu[_ngcontent-%COMP%], .detTxt[_ngcontent-%COMP%]{text-align:center}.callu[_ngcontent-%COMP%]{margin-top:10px;padding-left:8px;font-weight:700}"]}),t})();var m=n("JZFu"),u=n("/xxd"),f=n("al7H"),x=n("jhN1");function L(t,e){if(1&t){const t=s.Mb();s.Lb(0,"ion-item",9),s.Lb(1,"ion-card",10),s.Lb(2,"table",11),s.Lb(3,"tr"),s.Lb(4,"td",12),s.pc(5,"Delivery details"),s.Kb(),s.Kb(),s.Lb(6,"tr"),s.Lb(7,"td"),s.pc(8,"Name"),s.Kb(),s.Lb(9,"td"),s.pc(10),s.Kb(),s.Kb(),s.Lb(11,"tr"),s.Lb(12,"td"),s.pc(13,"Address"),s.Kb(),s.Lb(14,"td"),s.pc(15),s.Kb(),s.Kb(),s.Lb(16,"tr"),s.Lb(17,"td"),s.pc(18,"Pin Code"),s.Kb(),s.Lb(19,"td"),s.pc(20),s.Kb(),s.Kb(),s.Lb(21,"tr"),s.Lb(22,"td"),s.pc(23,"Phone"),s.Kb(),s.Lb(24,"td"),s.pc(25),s.Kb(),s.Kb(),s.Lb(26,"tr",13),s.Lb(27,"td",14),s.Lb(28,"ion-button",15),s.Tb("click",(function(){return s.ic(t),s.Vb().updateAddress()})),s.pc(29,"Edit Delivery Details"),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Kb()}if(2&t){const t=s.Vb();s.xb(10),s.qc(t.delivery.name),s.xb(5),s.qc(t.delivery.address),s.xb(5),s.qc(t.delivery.pincode),s.xb(5),s.qc(t.delivery.phone)}}const K=function(){return["/","home"]};function C(t,e){1&t&&(s.Lb(0,"div",16),s.pc(1," Cart Empty,"),s.Jb(2,"br"),s.pc(3,"Click to continue shopping..."),s.Jb(4,"br"),s.Lb(5,"a",17),s.Jb(6,"img",18),s.Kb(),s.Kb()),2&t&&(s.xb(5),s.bc("routerLink",s.cc(1,K)))}function v(t,e){1&t&&(s.Lb(0,"span"),s.pc(1,"..."),s.Kb())}function y(t,e){1&t&&(s.Lb(0,"span"),s.pc(1,"..."),s.Kb())}function O(t,e){if(1&t&&(s.Lb(0,"span"),s.pc(1),s.Jb(2,"br"),s.Kb()),2&t){const t=s.Vb().$implicit;s.xb(1),s.tc("",t.selected,"xRs.",t.price,"=Rs.",t.selected*t.price,"")}}function I(t,e){if(1&t&&(s.Lb(0,"span",41),s.nc(1,O,3,3,"span",8),s.Kb()),2&t){const t=e.$implicit;s.xb(1),s.bc("ngIf",t.selected>0)}}function P(t,e){if(1&t&&(s.Lb(0,"span"),s.pc(1),s.Jb(2,"br"),s.Kb()),2&t){const t=s.Vb().$implicit;s.xb(1),s.tc("",t.selected,"xRs.",t.price,"=Rs.",t.selected*t.price,"")}}function q(t,e){if(1&t&&(s.Lb(0,"span",41),s.nc(1,P,3,3,"span",8),s.Kb()),2&t){const t=e.$implicit;s.xb(1),s.bc("ngIf",0!=t.selected)}}function w(t,e){if(1&t){const t=s.Mb();s.Lb(0,"ion-item",55),s.Lb(1,"ion-label",56),s.pc(2),s.Kb(),s.Lb(3,"ion-textarea",57),s.Tb("ionChange",(function(n){s.ic(t);const i=e.index,o=s.Vb(3).$implicit;return s.Vb(3).vrnttxtchanged(n,o,i)})),s.Kb(),s.Kb()}if(2&t){const t=e.index;s.xb(2),s.rc("TEXT ",t+1,"")}}const M=function(){return[]};function z(t,e){if(1&t&&(s.Lb(0,"ion-list"),s.nc(1,w,4,1,"ion-item",54),s.Kb()),2&t){const t=s.Vb(3).$implicit;s.xb(1),s.bc("ngForOf",s.cc(1,M).constructor(t.requirements.texts))}}function k(t,e){if(1&t&&(s.Lb(0,"ion-avatar",61),s.Jb(1,"img",62),s.Kb()),2&t){const t=s.Vb().index,e=s.Vb(3).$implicit,n=s.Vb(3);s.xb(1),s.bc("src",n.sanitizer.bypassSecurityTrustUrl(e.reqImg[t]),s.kc)}}function _(t,e){if(1&t){const t=s.Mb();s.Lb(0,"ion-item",55),s.Lb(1,"div"),s.Lb(2,"ion-label",58),s.pc(3),s.Kb(),s.nc(4,k,2,1,"ion-avatar",59),s.Kb(),s.Lb(5,"div"),s.Lb(6,"ion-button"),s.Lb(7,"input",60),s.Tb("change",(function(n){s.ic(t);const i=e.index,o=s.Vb(3).$implicit;return s.Vb(3).loadImageFromDevice(n,o,i)})),s.Kb(),s.Kb(),s.Kb(),s.Kb()}if(2&t){const t=e.index,n=s.Vb(3).$implicit;s.xb(3),s.rc("IMAGE ",t+1,""),s.xb(1),s.bc("ngIf",n.reqImg&&n.reqImg[t])}}function T(t,e){if(1&t&&(s.Lb(0,"ion-list"),s.nc(1,_,8,2,"ion-item",54),s.Kb()),2&t){const t=s.Vb(3).$implicit;s.xb(1),s.bc("ngForOf",s.cc(1,M).constructor(t.requirements.images))}}function E(t,e){1&t&&(s.Lb(0,"ion-item",55),s.Lb(1,"ion-label",56),s.pc(2,"we will contact you for requirements, on registered phone number."),s.Kb(),s.Kb())}function F(t,e){if(1&t&&(s.Lb(0,"ion-list"),s.nc(1,E,3,0,"ion-item",54),s.Kb()),2&t){const t=s.Vb(3).$implicit;s.xb(1),s.bc("ngForOf",s.cc(1,M).constructor(t.requirements.texts))}}function S(t,e){if(1&t){const t=s.Mb();s.Lb(0,"ion-row",43),s.Lb(1,"ion-col",44),s.pc(2),s.Jb(3,"br"),s.pc(4),s.Kb(),s.Lb(5,"ion-col",45),s.Lb(6,"div",46),s.pc(7),s.Kb(),s.Lb(8,"ion-grid"),s.Lb(9,"ion-row"),s.Lb(10,"ion-col",47),s.Lb(11,"ion-fab",48),s.Tb("click",(function(){s.ic(t);const e=s.Vb().$implicit,n=s.Vb().$implicit;return s.Vb(2).pieceFunc(e,"sub",n)})),s.Lb(12,"ion-fab-button",49),s.Jb(13,"ion-icon",50),s.Kb(),s.Kb(),s.Kb(),s.Lb(14,"ion-col",51),s.Lb(15,"input",52),s.Tb("ngModelChange",(function(e){return s.ic(t),s.Vb().$implicit.selected=e})),s.Kb(),s.Kb(),s.Lb(16,"ion-col",47),s.Lb(17,"ion-fab",48),s.Tb("click",(function(){s.ic(t);const e=s.Vb().$implicit,n=s.Vb().$implicit;return s.Vb(2).pieceFunc(e,"add",n)})),s.Lb(18,"ion-fab-button",49),s.Jb(19,"ion-icon",53),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Lb(20,"ion-col",24),s.Jb(21,"hr"),s.nc(22,z,2,2,"ion-list",8),s.nc(23,T,2,2,"ion-list",8),s.nc(24,F,2,2,"ion-list",8),s.Kb(),s.Kb()}if(2&t){const t=s.Vb().$implicit,e=s.Vb().$implicit;s.xb(2),s.qc(t.type),s.xb(2),s.sc("Rs.",t.price,"/",t.unit,""),s.xb(3),s.rc("Quantity (",t.unit,")"),s.xb(8),s.bc("ngModel",t.selected),s.xb(7),s.bc("ngIf",e.requirements&&e.requirements.texts),s.xb(1),s.bc("ngIf",e.requirements&&e.requirements.images),s.xb(1),s.bc("ngIf",e.requirements&&0==e.requirements.texts&&0==e.requirements.images)}}function V(t,e){if(1&t&&(s.Lb(0,"span"),s.nc(1,S,25,8,"ion-row",42),s.Kb()),2&t){const t=e.$implicit;s.xb(1),s.bc("ngIf",0!=t.selected)}}function $(t,e){if(1&t){const t=s.Mb();s.Lb(0,"ion-item",21),s.Lb(1,"ion-card",22),s.Lb(2,"ion-grid",23),s.Lb(3,"ion-row"),s.Lb(4,"ion-col",24),s.Jb(5,"img",25),s.Kb(),s.Lb(6,"ion-col",24),s.Lb(7,"div",26),s.Lb(8,"h4",27),s.Lb(9,"span",28),s.pc(10),s.Wb(11,"slice"),s.Kb(),s.pc(12),s.Wb(13,"slice"),s.nc(14,v,2,0,"span",8),s.Kb(),s.Kb(),s.Lb(15,"div",29),s.Lb(16,"h4",27),s.Lb(17,"span",28),s.pc(18),s.Wb(19,"slice"),s.Kb(),s.pc(20),s.Wb(21,"slice"),s.nc(22,y,2,0,"span",8),s.Kb(),s.nc(23,I,2,1,"span",30),s.Lb(24,"ion-fab",31),s.Lb(25,"ion-fab-button",32),s.Tb("click",(function(){s.ic(t);const n=e.$implicit;return s.Vb(2).removePiece(n,1)})),s.Jb(26,"ion-icon",33),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Lb(27,"ion-row",34),s.Lb(28,"ion-col"),s.Lb(29,"div",35),s.nc(30,q,2,1,"span",30),s.Kb(),s.Kb(),s.Lb(31,"ion-col",36),s.Lb(32,"ion-fab",37),s.Lb(33,"ion-fab-button",38),s.Tb("click",(function(){s.ic(t);const n=e.$implicit;return s.Vb(2).removePiece(n,1)})),s.Jb(34,"ion-icon",39),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.nc(35,V,2,1,"span",40),s.Kb(),s.Kb(),s.Kb()}if(2&t){const t=e.$implicit;s.xb(5),s.bc("src",t.src,s.kc),s.xb(5),s.qc(s.Yb(11,10,t.name,0,1)),s.xb(2),s.qc(s.Yb(13,14,t.name,1,30)),s.xb(2),s.bc("ngIf",t.name.length>=30),s.xb(4),s.qc(s.Yb(19,18,t.name,0,1)),s.xb(2),s.qc(s.Yb(21,22,t.name,1,60)),s.xb(2),s.bc("ngIf",t.name.length>=60),s.xb(1),s.bc("ngForOf",t.variants),s.xb(7),s.bc("ngForOf",t.variants),s.xb(5),s.bc("ngForOf",t.variants)}}function J(t,e){if(1&t&&(s.Lb(0,"ion-list"),s.Lb(1,"ion-list-header",19),s.pc(2," Order Details "),s.Kb(),s.nc(3,$,36,26,"ion-item",20),s.Kb()),2&t){const t=s.Vb();s.xb(3),s.bc("ngForOf",t.currentCart)}}const j=[{path:"",component:(()=>{class t{constructor(t,e,n,i,o,r,c){this.cartHolder=t,this.modalController=e,this.authCheckService=n,this.alertController=i,this.loadingController=o,this.router=r,this.sanitizer=c,this.listItemz=[],this.currentCart=[],this.totals=0,this.delivery={},this.loading={},this.showSpin=!1,this.failed=0,this.blobURL=""}ngOnInit(){}ionViewWillEnter(){localStorage.getItem("zname")&&localStorage.getItem("zaddress")&&localStorage.getItem("zpincode")&&localStorage.getItem("zphone")?this.delivery={name:localStorage.getItem("zname"),address:localStorage.getItem("zaddress"),pincode:localStorage.getItem("zpincode"),phone:localStorage.getItem("zphone")}:this.updateAddress(),""==localStorage.getItem("zphone")&&this.authCheckService.logout(),this.currentCart=[],this.listItemz=this.cartHolder.getCurrentCart(),this.listItemz.forEach(t=>{let e=0;t&&t.variants&&t.variants.forEach(t=>{if(t&&t.selected&&t.selected>0)return e=1,!0}),1==e&&this.currentCart.push(t)}),this.computeTotals(),this.currentCart.forEach(t=>{t&&t.variants&&t.variants.length>0&&t.variants.forEach(e=>{if(e&&!e.reqImg&&(e.reqImg=[]),e&&!e.reqtxt&&t.requirements&&t.requirements.texts>0){e.reqtxt=[];for(let n=0;n<t.requirements.texts;n++)e.reqtxt.push("")}})}),console.log("this.cartHolder.cartCount",this.cartHolder.cartCount),console.log("currentCart",this.currentCart)}removePiece(t,e=0){this.currentCart=this.currentCart.filter(n=>{if(n.name!=t.name)return!0;this.listItemz.forEach(i=>{i.name==t.name&&i.variants.forEach(t=>{let i=t.selected;t.selected=0,0!=i&&1==e&&(console.log(n.name,"this.cartHolder.cartCount",this.cartHolder.cartCount),this.cartHolder.cartCount=this.cartHolder.cartCount-1)})})}),this.computeTotals()}pieceFunc(t,e,n){if("sub"==e){if(t.selected=t.selected-1,0==t.selected){this.cartHolder.cartCount=this.cartHolder.cartCount-1;let t=1;n.variants.forEach(e=>{if(e&&e.selected&&e.selected>0)return t=0,!0}),1==t&&this.removePiece(n)}}else"add"==e&&(t.selected=t.selected+1);this.cartHolder.setCurrentCart([...this.listItemz]),this.computeTotals()}computeTotals(){this.totals=0,this.currentCart.forEach(t=>{t&&t.variants&&t.variants.length&&t.variants.forEach(t=>{t&&t.selected&&t.selected>0&&(this.totals=this.totals+t.selected*t.price)})})}checkReq(){return new Promise((t,e)=>{this.currentCart.length>0?this.currentCart.forEach((e,n)=>{e.requirements&&e.requirements.texts&&e.requirements.texts>0&&e.variants.forEach(n=>{0==this.failed&&n.selected>0&&n.reqtxt.forEach((n,i)=>Object(a.a)(this,void 0,void 0,(function*(){n&&""!=n||0!=this.failed||(this.failed=1,yield this.alertController.create({header:"Text "+(i+1)+" in "+e.name,subHeader:"Text data is missing",message:"Enter all the data is the form to continue...",buttons:["OK"]}).then(e=>(e.present(),t(!1),!1)))})))}),e.requirements&&e.requirements.images&&e.requirements.images>0&&e.variants.forEach(n=>Object(a.a)(this,void 0,void 0,(function*(){if(0==this.failed&&n.selected>0){0!=n.reqImg.length&&n.reqImg.length==e.requirements.images||(this.failed=1,yield this.alertController.create({header:"Image data is missing",subHeader:e.name,message:"Enter all the data is the form to continue...",buttons:["OK"]}).then(e=>{e.present(),t(!1)})),console.log("failed",this.failed),console.log("vrnt.reqImg",n.reqImg);for(let i=0;i<n.reqImg.length;i++){let o=n.reqImg[i];console.log("Item Passed",e.name,"txt",o),o&&""!=o||0!=this.failed||(this.failed=1,yield this.alertController.create({header:"Image data is missing",subHeader:"Image "+(i+1)+" in "+e.name,message:"Enter all the data is the form to continue...",buttons:["OK"]}).then(e=>{e.present(),t(!1)}))}}}))),console.log(n+1,"==",this.currentCart.length),n+1==this.currentCart.length&&0==this.failed&&t(!0)}):t(!0)})}placeOrder(){return Object(a.a)(this,void 0,void 0,(function*(){return this.failed=0,console.log("started placing"),!!(yield this.checkReq())&&(console.log("PROCEEDING",this.currentCart.length),0==this.currentCart.length?(yield this.alertController.create({header:"Cart Empty",subHeader:"You have not added items to cart",message:"Add items to cart to continue...",buttons:["OK"]}).then(t=>{t.present()}),!0):(this.cartHolder.cartObj=this.currentCart,void(this.delivery&&this.delivery.address&&this.delivery.pincode&&this.delivery.name?(this.loading=yield this.loadingController.create({message:"Placing Order.."}),yield this.loading.present().then(()=>{m.a.firestore().collection("chocoorders").add({userNum:localStorage.getItem("zphone"),delivery:{address:this.delivery.address,pincode:this.delivery.pincode,name:this.delivery.name},items:this.currentCart,date:(new Date).getTime(),status:"Pending"}).then(t=>Object(a.a)(this,void 0,void 0,(function*(){console.log("Document written with ID: ",t.id),this.loading.dismiss();const e=yield this.modalController.create({component:h,componentProps:{data:this.currentCart,totals:this.totals,delivery:this.delivery,error:!1}});yield e.present();const{data:n}=yield e.onWillDismiss();console.log(n),this.currentCart=[],this.totals=0,this.cartHolder.cartCount=0,this.cartHolder.setCurrentCart([])}))).catch(t=>Object(a.a)(this,void 0,void 0,(function*(){console.error("Error adding document: ",t),this.loading.dismiss();const e=yield this.modalController.create({component:h,componentProps:{data:[],totals:0,delivery:[],error:!0}});yield e.present();const{data:n}=yield e.onWillDismiss();console.log(n)})))})):this.updateAddress())))}))}getAddress(t,e,n){return Object(a.a)(this,void 0,void 0,(function*(){const i=yield this.alertController.create({header:"Address",inputs:[{name:"name",id:"name",type:"text",value:t,placeholder:"ENTER NAME"},{name:"address",id:"address",type:"textarea",value:e,placeholder:"ENTER ADDRESS"},{name:"pincode",id:"pincode",type:"number",value:n,placeholder:"Pin Code"},{name:"phone",id:"Phone",type:"number",value:localStorage.getItem("zphone"),placeholder:"Phone"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}},{text:"Done",handler:t=>{this.delivery=t,localStorage.setItem("zname",this.delivery.name),localStorage.setItem("zaddress",this.delivery.address),localStorage.setItem("zpincode",this.delivery.pincode)}}]});yield i.present()}))}updateAddress(){let t=localStorage.getItem("zname"),e=localStorage.getItem("zaddress"),n=localStorage.getItem("zpincode");this.getAddress(t,e,n)}loadImageFromDevice(t,e,n){return Object(a.a)(this,void 0,void 0,(function*(){this.loading=yield this.loadingController.create({message:"Uploading Image.."}),yield this.loading.present().then(()=>{e&&!e.reqImg&&(e.reqImg=[]);const i=t.target.files[0],o=new FileReader;o.readAsArrayBuffer(i),o.onload=()=>{let t=new Blob([new Uint8Array(o.result)]);e&&e.reqImg&&null!=e.reqImg.length?m.a.storage().ref().child("uploads/"+i.name).put(t).then(t=>Object(a.a)(this,void 0,void 0,(function*(){"success"==t.state?(console.log("Uploaded a blob or file!",t),e.reqImg[n]=yield t.ref.getDownloadURL(),this.loading.dismiss()):this.alertController.create({header:"Image upload failed",subHeader:"Try to upload image again..",message:"Failed to upload "+i.name+"...",buttons:["OK"]}).then(t=>{this.loading.dismiss()})}))):this.alertController.create({header:"Image upload failed",subHeader:"Try to upload image again..",message:"Failed to upload "+i.name+"...",buttons:["OK"]}).then(t=>{this.loading.dismiss()})},o.onerror=t=>{this.loading.dismiss()}})}))}vrnttxtchanged(t,e,n){console.log(t.detail.value,e,n),t&&t.detail&&t.detail.value&&e&&e.reqtxt&&e.reqtxt.length&&null!=e.reqtxt[n]&&(e.reqtxt[n]=t.detail.value)}}return t.\u0275fac=function(e){return new(e||t)(s.Ib(u.a),s.Ib(r.Y),s.Ib(f.a),s.Ib(r.b),s.Ib(r.X),s.Ib(c.g),s.Ib(x.b))},t.\u0275cmp=s.Cb({type:t,selectors:[["app-cart"]],decls:19,vars:4,consts:[["slot","start"],[1,"totals"],[1,"totalsTxt"],[1,"totalsBtn"],["color","warning","size","default",3,"click"],["slot","end","name","cart"],["lines","none",4,"ngIf"],["class","noCart",4,"ngIf"],[4,"ngIf"],["lines","none"],[2,"margin","10px 0px","width","97%"],[1,"summary"],["colspan","2",2,"font-weight","600"],[2,"border","0px"],["colspan","2",2,"border","0px"],[2,"width","100%","margin","10px 0px",3,"click"],[1,"noCart"],[3,"routerLink"],["src","./assets/shop.png"],[2,"padding","3px","padding-left","10px"],["class","oneItem","lines","none",4,"ngFor","ngForOf"],["lines","none",1,"oneItem"],[2,"margin-left","4px"],[2,"width","100%"],["size","12"],[1,"thumbImg",3,"src"],[1,"hideOnPc"],[1,"titleTxt"],[2,"text-transform","uppercase"],[1,"hideOnmobile","splitquant"],["class","pricing",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end"],["color","danger",3,"click"],["name","trash"],[1,"hideOnPc","splitquant"],[2,"min-height","25px"],["size","3"],["vertical","center","horizontal","end"],["size","small","color","danger",3,"click"],["name","trash",2,"font-size","1.5rem"],[4,"ngFor","ngForOf"],[1,"pricing"],["class","pieceContainer",4,"ngIf"],[1,"pieceContainer"],["size","6",1,"centerQuantBtn"],["size","6",2,"text-align","center"],[2,"padding-top","4px"],["size","4"],["vertical","center","horizontal","center",3,"click"],["size","small","color","dark"],["name","remove-circle-outline",1,"cirIcon"],["size","4",1,"centerQuantBtn",2,"font-weight","600","font-size","22px"],["type","number","min","1",1,"countcss",3,"ngModel","ngModelChange"],["name","add-circle-outline",1,"cirIcon"],["style","--background: linear-gradient(to right, #ededed 0%, #ffffff 100%);",4,"ngFor","ngForOf"],[2,"--background","linear-gradient(to right, #ededed 0%, #ffffff 100%)"],["position","stacked",1,"reqLabel"],["placeholder","Enter text here...",3,"ionChange"],["position","stacked",1,"reqLabel",2,"display","inline-block"],["style","display: inline-block; margin-left: 5%;",4,"ngIf"],["type","file","id","file-input","accept","image/png, image/jpeg",3,"change"],[2,"display","inline-block","margin-left","5%"],[3,"src"]],template:function(t,e){1&t&&(s.Lb(0,"ion-header"),s.Lb(1,"ion-toolbar"),s.Lb(2,"ion-buttons",0),s.Jb(3,"ion-back-button"),s.Kb(),s.Lb(4,"ion-title"),s.pc(5,"Cart"),s.Kb(),s.Kb(),s.Kb(),s.Lb(6,"ion-header"),s.Lb(7,"ion-toolbar"),s.Lb(8,"div",1),s.Lb(9,"div",2),s.pc(10),s.Kb(),s.Lb(11,"div",3),s.Lb(12,"ion-button",4),s.Tb("click",(function(){return e.placeOrder()})),s.pc(13,"Place Order "),s.Jb(14,"ion-icon",5),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Lb(15,"ion-content"),s.nc(16,L,30,4,"ion-item",6),s.nc(17,C,7,2,"div",7),s.nc(18,J,4,1,"ion-list",8),s.Kb()),2&t&&(s.xb(10),s.rc("Total Cost - Rs.",e.totals,""),s.xb(6),s.bc("ngIf",e.delivery&&e.delivery.address&&""!=e.delivery.address),s.xb(1),s.bc("ngIf",0==e.currentCart.length),s.xb(1),s.bc("ngIf",!(0==e.currentCart.length)))},directives:[r.t,r.U,r.i,r.e,r.f,r.T,r.h,r.u,r.o,i.k,r.y,r.j,c.i,r.ab,r.A,r.B,i.j,r.s,r.H,r.n,r.p,r.q,o.j,o.a,o.e,o.h,r.z,r.S,r.cb,r.d],pipes:[i.n],styles:[".thumbImg[_ngcontent-%COMP%]{border-radius:10px!important;overflow:hidden;-o-object-fit:cover;object-fit:cover}@media (min-width:1000px){.thumbImg[_ngcontent-%COMP%]{width:50%;margin-left:25%}}@media (max-width:1000px){.thumbImg[_ngcontent-%COMP%]{min-height:60%}}@media (min-width:1000px){.hideOnPc[_ngcontent-%COMP%]{display:none}}@media (max-width:1000px){.hideOnmobile[_ngcontent-%COMP%]{display:none}}.cirIcon[_ngcontent-%COMP%]{cursor:pointer;font-size:30px}.descTxt[_ngcontent-%COMP%]{margin-top:0;padding-top:2%;color:#5b5b5b}.titleTxt[_ngcontent-%COMP%]{text-transform:lowercase}.centerQuantBtn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;line-height:1.4}.fabBg[_ngcontent-%COMP%]{background:#3e4b63}.oneItem[_ngcontent-%COMP%]{margin:10px 0}.pieceContainer[_ngcontent-%COMP%]{border-left:6px solid #2b5b98;background-image:linear-gradient(90deg,#ededed 0,#fff);border-radius:10px 0 0 10px;margin-top:2px}.pricing[_ngcontent-%COMP%]{margin-top:0;padding-top:2%;color:#884242}.noCart[_ngcontent-%COMP%]{height:100%;padding-top:15%;font-weight:600;font-size:20px;text-align:center}.noCart[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50%;padding-top:10%}@media (min-width:1000px){.noCart[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding-top:10px;height:100%}}.totals[_ngcontent-%COMP%]{font-weight:600;font-size:20px}.totals[_ngcontent-%COMP%]   .totalsTxt[_ngcontent-%COMP%]{padding-top:3%;padding-left:10px;font-size:large;width:50%;display:inline-block;vertical-align:middle}.totals[_ngcontent-%COMP%]   .totalsBtn[_ngcontent-%COMP%]{width:50%;display:inline-block;text-align:right}.summary[_ngcontent-%COMP%]{width:100%;font-size:1rem;color:#666;line-height:1.6;text-align:center}.summary[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .summary[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:1px solid #efefef;padding:3px 10px}.countcss[_ngcontent-%COMP%]{width:100%;text-align:center;border:2px solid}.reqLabel[_ngcontent-%COMP%]{font-weight:800}"]}),t})()}];let H=(()=>{class t{}return t.\u0275mod=s.Gb({type:t}),t.\u0275inj=s.Fb({factory:function(e){return new(e||t)},imports:[[c.j.forChild(j)],c.j]}),t})(),D=(()=>{class t{}return t.\u0275mod=s.Gb({type:t}),t.\u0275inj=s.Fb({factory:function(e){return new(e||t)},imports:[[i.b,o.b,r.V,H]]}),t})()}}]);
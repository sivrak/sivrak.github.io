(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{kY2p:function(t,n,i){"use strict";i.r(n),i.d(n,"ManagerPageModule",(function(){return q}));var e=i("ofXK"),o=i("3Pt+"),c=i("TEn/"),b=i("tyNb"),a=i("fXoL"),r=i("mrSG"),s=i("JZFu");function l(t,n){1&t&&a.Jb(0,"ion-spinner")}function p(t,n){if(1&t&&(a.Lb(0,"span",9),a.pc(1),a.Kb()),2&t){const t=a.Vb().$implicit;a.xb(1),a.sc("",t.type," X ",t.selected,"")}}function d(t,n){if(1&t&&(a.Lb(0,"span",11),a.pc(1),a.Kb()),2&t){const t=a.Vb().index;a.xb(1),a.rc("Text ",t,": ")}}function g(t,n){1&t&&(a.Lb(0,"span"),a.pc(1,","),a.Kb())}function u(t,n){1&t&&(a.Lb(0,"span"),a.Jb(1,"br"),a.Kb())}function h(t,n){if(1&t&&(a.Lb(0,"span"),a.nc(1,d,2,1,"span",10),a.pc(2),a.nc(3,g,2,0,"span",0),a.nc(4,u,2,0,"span",0),a.Kb()),2&t){const t=n.$implicit,i=n.index,e=a.Vb().$implicit;a.xb(1),a.bc("ngIf",t),a.xb(1),a.rc("",t," "),a.xb(1),a.bc("ngIf",t&&i+1!=e.reqtxt.length),a.xb(1),a.bc("ngIf",t&&i+1==e.reqtxt.length)}}function f(t,n){if(1&t&&(a.Lb(0,"span"),a.Jb(1,"img",12),a.Kb()),2&t){const t=n.$implicit;a.xb(1),a.bc("src",t,a.kc)}}function m(t,n){if(1&t&&(a.Lb(0,"span"),a.nc(1,p,2,2,"span",8),a.Lb(2,"div"),a.nc(3,h,5,4,"span",2),a.nc(4,f,2,1,"span",2),a.Kb(),a.Kb()),2&t){const t=n.$implicit;a.xb(1),a.bc("ngIf",t.selected&&t.selected>0),a.xb(2),a.bc("ngForOf",t.reqtxt),a.xb(1),a.bc("ngForOf",t.reqImg)}}function L(t,n){if(1&t&&(a.Lb(0,"span"),a.Jb(1,"hr"),a.Lb(2,"div",4),a.Lb(3,"ion-avatar",5),a.Jb(4,"img",6),a.Kb(),a.Lb(5,"ion-label",7),a.pc(6),a.nc(7,m,5,3,"span",2),a.Kb(),a.Kb(),a.Kb()),2&t){const t=n.$implicit;a.xb(4),a.bc("src",t.src,a.kc),a.xb(2),a.rc("",t.name," "),a.xb(1),a.bc("ngForOf",t.variants)}}function K(t,n){if(1&t&&(a.Lb(0,"div"),a.Lb(1,"ion-card"),a.Lb(2,"div",3),a.pc(3," Order placed "),a.Kb(),a.Lb(4,"ion-card-header"),a.Lb(5,"ion-card-subtitle"),a.pc(6),a.Wb(7,"date"),a.Kb(),a.Kb(),a.Lb(8,"ion-card-content"),a.Lb(9,"div"),a.nc(10,L,8,3,"span",2),a.Kb(),a.Kb(),a.Kb(),a.Jb(11,"hr"),a.Kb()),2&t){const t=n.$implicit;a.xb(6),a.tc("",t.delivery.name," - Pincode ",t.delivery.pincode," - Date (",a.Xb(7,4,t.date),")"),a.xb(4),a.bc("ngForOf",t.items)}}function x(t,n){if(1&t&&(a.Lb(0,"div"),a.nc(1,K,12,6,"div",2),a.Kb()),2&t){const t=a.Vb();a.xb(1),a.bc("ngForOf",t.historyList)}}function w(t,n){1&t&&(a.Lb(0,"p",13),a.pc(1," No previous orders found.. "),a.Kb())}let v=(()=>{class t{constructor(t){this.alertController=t,this.historyList=[],this.status=!1,this.showSpin=!0}ngOnInit(){let t=localStorage.getItem("zphone");console.log(t),t?this.initDatas(t):this.alertController.create({header:"Login To Continue",message:"User must be logged in",buttons:["OK"]}).then(t=>{t.present()})}initDatas(t){return Object(r.a)(this,void 0,void 0,(function*(){this.historyList=[];let t=s.a.firestore().collection("chocoorders");yield t.get().then(t=>{this.showSpin=!1,t.empty?(this.status=!0,this.historyList=[]):(t.forEach(t=>{this.historyList.push(t.data())}),this.historyList.sort((t,n)=>{let i=new Date(t.date),e=new Date(n.date);return i<e?1:i>e?-1:0}))}).catch((function(t){console.log("Error getting documents: ",t)}))}))}}return t.\u0275fac=function(n){return new(n||t)(a.Ib(c.b))},t.\u0275cmp=a.Cb({type:t,selectors:[["app-all-orders"]],decls:3,vars:3,consts:[[4,"ngIf"],["style","padding-left: 15px;",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"statuz"],[1,"chipz"],[1,"avatarz"],[3,"src"],["text-wrap","",1,"labelz",2,"font-weight","600"],["style","font-weight: 300;",4,"ngIf"],[2,"font-weight","300"],["style","font-weight: 600;",4,"ngIf"],[2,"font-weight","600"],[2,"height","25px","width","auto","border-radius","8px",3,"src"],[2,"padding-left","15px"]],template:function(t,n){1&t&&(a.nc(0,l,1,0,"ion-spinner",0),a.nc(1,x,2,1,"div",0),a.nc(2,w,2,0,"p",1)),2&t&&(a.bc("ngIf",n.showSpin),a.xb(1),a.bc("ngIf",n.historyList&&n.historyList.length>0),a.xb(1),a.bc("ngIf",n.status&&n.historyList&&0==n.historyList.length))},directives:[e.k,c.N,e.j,c.j,c.l,c.m,c.k,c.d,c.z],pipes:[e.d],styles:[".avatarz[_ngcontent-%COMP%]{width:19%;height:auto}.avatarz[_ngcontent-%COMP%], .labelz[_ngcontent-%COMP%]{display:inline-block}.labelz[_ngcontent-%COMP%]{width:75%;margin-left:5%}.chipz[_ngcontent-%COMP%]{margin-bottom:10px}.statuz[_ngcontent-%COMP%]{text-align:right;margin-right:20px;color:#bd7304;font-weight:600}ion-spinner[_ngcontent-%COMP%]{width:50px;height:50px;stroke:#444;fill:#222;margin-left:47%;margin-top:3%;margin-bottom:3%}"]}),t})();function y(t,n){if(1&t){const t=a.Mb();a.Lb(0,"div"),a.Lb(1,"p",5),a.pc(2),a.Kb(),a.Lb(3,"input",6,7),a.Tb("ngModelChange",(function(n){return a.ic(t),a.Vb().currentUpload=n})),a.Kb(),a.Lb(5,"ion-button",8),a.Tb("click",(function(){a.ic(t);const n=a.gc(4);return a.Vb().copytoclip(n)})),a.pc(6,"Copy"),a.Kb(),a.Kb()}if(2&t){const t=a.Vb();a.xb(2),a.qc(t.currentUpload),a.xb(1),a.bc("ngModel",t.currentUpload)}}function M(t,n){if(1&t){const t=a.Mb();a.Lb(0,"ion-button",9),a.Tb("click",(function(){return a.ic(t),a.Vb().category()})),a.pc(1,"Category"),a.Kb()}}function C(t,n){if(1&t){const t=a.Mb();a.Lb(0,"ion-button",9),a.Tb("click",(function(){return a.ic(t),a.Vb().products()})),a.pc(1,"Products"),a.Kb()}}function V(t,n){1&t&&a.Jb(0,"ion-spinner")}function k(t,n){if(1&t){const t=a.Mb();a.Lb(0,"ion-item"),a.Lb(1,"ion-avatar",13),a.Jb(2,"img",14),a.Kb(),a.Lb(3,"ion-label"),a.Lb(4,"h2"),a.pc(5),a.Kb(),a.Lb(6,"p"),a.pc(7),a.Kb(),a.Lb(8,"div"),a.pc(9," Image - "),a.Lb(10,"input",15),a.Tb("ngModelChange",(function(i){return a.ic(t),n.$implicit.img=i})),a.Kb(),a.Kb(),a.Lb(11,"div"),a.pc(12," Category - "),a.Lb(13,"input",15),a.Tb("ngModelChange",(function(i){return a.ic(t),n.$implicit.cat=i})),a.Kb(),a.Kb(),a.Lb(14,"div"),a.pc(15," Id - "),a.Lb(16,"input",15),a.Tb("ngModelChange",(function(i){return a.ic(t),n.$implicit.id=i})),a.Kb(),a.Kb(),a.Lb(17,"div"),a.Lb(18,"ion-button",16),a.Tb("click",(function(){a.ic(t);const i=n.index;return a.Vb(2).removeCat(i)})),a.pc(19,"Remove"),a.Kb(),a.Kb(),a.Kb(),a.Kb()}if(2&t){const t=n.$implicit,i=n.index;a.xb(2),a.bc("src",t.img,a.kc),a.xb(3),a.qc(t.cat),a.xb(2),a.rc("ID - ",t.id,""),a.xb(3),a.bc("ngModel",t.img)("name","catDa"+i),a.xb(3),a.bc("ngModel",t.cat)("name","catDa1"+i),a.xb(3),a.bc("ngModel",t.id)("name","catDa2"+i)}}function I(t,n){if(1&t){const t=a.Mb();a.Lb(0,"ion-content"),a.Lb(1,"ion-list"),a.Lb(2,"ion-list-header"),a.pc(3," Categories "),a.Kb(),a.Lb(4,"ion-item"),a.Lb(5,"ion-label"),a.Lb(6,"p"),a.pc(7,"Name - "),a.Lb(8,"input",10),a.Tb("ngModelChange",(function(n){return a.ic(t),a.Vb().catData.name=n})),a.Kb(),a.Kb(),a.Lb(9,"p"),a.pc(10,"Phone - "),a.Lb(11,"input",10),a.Tb("ngModelChange",(function(n){return a.ic(t),a.Vb().catData.phone=n})),a.Kb(),a.Kb(),a.Kb(),a.Kb(),a.nc(12,k,20,9,"ion-item",11),a.Lb(13,"ion-item"),a.Lb(14,"ion-button",12),a.Tb("click",(function(){a.ic(t);const n=a.Vb();return n.addCat(n.catData.catalogue)})),a.pc(15,"Add Category"),a.Kb(),a.Kb(),a.Kb(),a.Kb()}if(2&t){const t=a.Vb();a.xb(8),a.bc("ngModel",t.catData.name),a.xb(3),a.bc("ngModel",t.catData.phone),a.xb(1),a.bc("ngForOf",t.catData.catalogue)}}function T(t,n){if(1&t&&(a.Lb(0,"option",21),a.pc(1),a.Kb()),2&t){const t=n.$implicit;a.bc("value",t.id),a.xb(1),a.qc(t.cat)}}function D(t,n){if(1&t){const t=a.Mb();a.Lb(0,"div"),a.Lb(1,"table"),a.Lb(2,"tr",22),a.Lb(3,"td"),a.pc(4,"Type"),a.Kb(),a.Lb(5,"td"),a.Lb(6,"input",15),a.Tb("ngModelChange",(function(i){return a.ic(t),n.$implicit.type=i})),a.Kb(),a.Kb(),a.Kb(),a.Lb(7,"tr",22),a.Lb(8,"td"),a.pc(9,"Price"),a.Kb(),a.Lb(10,"td"),a.Lb(11,"input",15),a.Tb("ngModelChange",(function(i){return a.ic(t),n.$implicit.price=i})),a.Kb(),a.Kb(),a.Kb(),a.Lb(12,"tr",22),a.Lb(13,"td"),a.pc(14,"Unit"),a.Kb(),a.Lb(15,"td"),a.Lb(16,"input",15),a.Tb("ngModelChange",(function(i){return a.ic(t),n.$implicit.unit=i})),a.Kb(),a.Kb(),a.Kb(),a.Lb(17,"tr",22),a.Lb(18,"td"),a.Lb(19,"ion-button",16),a.Tb("click",(function(){a.ic(t);const i=n.index,e=a.Vb().$implicit;return a.Vb(2).removeVrnt(e.variants,i)})),a.pc(20,"Remove"),a.Kb(),a.Kb(),a.Kb(),a.Kb(),a.Jb(21,"div",23),a.Kb()}if(2&t){const t=n.$implicit,i=a.Vb().index;a.xb(6),a.bc("ngModel",t.type)("name","in"+i),a.xb(5),a.bc("ngModel",t.price)("name","in1"+i),a.xb(5),a.bc("ngModel",t.unit)("name","in2"+i)}}function O(t,n){if(1&t){const t=a.Mb();a.Lb(0,"ion-item"),a.Lb(1,"ion-avatar",13),a.Jb(2,"img",14),a.Kb(),a.Lb(3,"ion-label"),a.Lb(4,"h2"),a.pc(5,"Name -"),a.Kb(),a.Lb(6,"input",15),a.Tb("ngModelChange",(function(i){return a.ic(t),n.$implicit.name=i})),a.Kb(),a.Lb(7,"p"),a.pc(8,"Image -"),a.Lb(9,"input",15),a.Tb("ngModelChange",(function(i){return a.ic(t),n.$implicit.src=i})),a.Kb(),a.Kb(),a.Lb(10,"p"),a.pc(11,"Desc -"),a.Lb(12,"input",15),a.Tb("ngModelChange",(function(i){return a.ic(t),n.$implicit.desc=i})),a.Kb(),a.Kb(),a.Lb(13,"p"),a.pc(14,"Category - "),a.Lb(15,"select",15),a.Tb("ngModelChange",(function(i){return a.ic(t),n.$implicit.category=i})),a.nc(16,T,2,2,"option",17),a.Kb(),a.Kb(),a.Lb(17,"p"),a.pc(18,"Text - "),a.Lb(19,"input",18),a.Tb("ngModelChange",(function(i){return a.ic(t),n.$implicit.requirements.texts=i})),a.Kb(),a.Kb(),a.Lb(20,"p"),a.pc(21,"Images - "),a.Lb(22,"input",18),a.Tb("ngModelChange",(function(i){return a.ic(t),n.$implicit.requirements.images=i})),a.Kb(),a.Kb(),a.Lb(23,"p"),a.pc(24,"Variants - "),a.Kb(),a.nc(25,D,22,6,"div",11),a.Lb(26,"ion-button",16),a.Tb("click",(function(){a.ic(t);const i=n.$implicit;return a.Vb(2).addVar(i.variants)})),a.pc(27,"Add Variant"),a.Kb(),a.Jb(28,"br"),a.Jb(29,"hr"),a.Lb(30,"ion-button",19),a.Tb("click",(function(){a.ic(t);const i=n.index;return a.Vb(2).removeProd(i)})),a.pc(31,"Remove"),a.Kb(),a.Jb(32,"div",20),a.Kb(),a.Kb()}if(2&t){const t=n.$implicit,i=n.index,e=a.Vb(2);a.xb(2),a.bc("src",t.src,a.kc),a.xb(4),a.bc("ngModel",t.name)("name","prod1"+i),a.xb(3),a.bc("ngModel",t.src)("name","prodi"+i),a.xb(3),a.bc("ngModel",t.desc)("name","prodd"+i),a.xb(3),a.bc("ngModel",t.category)("name","prod2"+i),a.xb(1),a.bc("ngForOf",e.catData.catalogue),a.xb(3),a.bc("ngModel",t.requirements.texts)("name","prod3"+i),a.xb(3),a.bc("ngModel",t.requirements.images)("name","prod4"+i),a.xb(3),a.bc("ngForOf",t.variants)}}function P(t,n){if(1&t){const t=a.Mb();a.Lb(0,"ion-content"),a.Lb(1,"ion-list"),a.Lb(2,"ion-list-header"),a.pc(3," Products "),a.Kb(),a.Lb(4,"ion-item"),a.Lb(5,"ion-button",12),a.Tb("click",(function(){a.ic(t);const n=a.Vb();return n.addProd(n.prodData)})),a.pc(6,"Add Product"),a.Kb(),a.Kb(),a.nc(7,O,33,15,"ion-item",11),a.Kb(),a.Kb()}if(2&t){const t=a.Vb();a.xb(7),a.bc("ngForOf",t.prodData)}}let $=(()=>{class t{constructor(){this.showSpin=!0,this.prodData={},this.catData={},this.showWhat="cat",this.currentUpload=""}ngOnInit(){}category(){return Object(r.a)(this,void 0,void 0,(function*(){this.showSpin=!0,this.showWhat="cat";let t=s.a.firestore().collection("chocoshop").doc("digiCat"),n=yield t.get();n.exists?(this.catData=n.data(),this.showSpin=!1,console.log(this.catData)):console.log("EMPTY")}))}products(){return Object(r.a)(this,void 0,void 0,(function*(){this.showSpin=!0,this.showWhat="prod";let t=s.a.firestore().collection("chocoshop").doc("digiProd"),n=yield t.get();n.exists?(this.prodData=n.data().data,this.showSpin=!1,console.log(this.prodData)):console.log("EMPTY")}))}addVar(t){t.push({type:"",price:0,unit:"",selected:0})}addCat(t){t.push({cat:"",id:0,img:""})}addProd(t){t.unshift({name:"",src:"",desc:"",category:0,variants:[],requirements:{texts:0,images:0}})}removeProd(t){let n=prompt("Enter 'yes' ",t);console.log(n),"yes"==n&&this.prodData.splice(t,1)}removeCat(t){let n=prompt("Enter 'yes' ",t);console.log(n),"yes"==n&&this.catData.catalogue.splice(t,1)}removeVrnt(t,n){let i=prompt("Enter 'yes' ",n);console.log(i),"yes"==i&&t.splice(n,1)}filechange(t){t.target&&t.target.files[0]&&t.target.files[0].name&&(console.log(t.target.files[0]),t.target.files[0].size>6e5?alert("File size is BIG, should be less than 600kb"):s.a.storage().ref().child("newImages/"+t.target.files[0].name+(new Date).getTime()).put(t.target.files[0]).then(t=>Object(r.a)(this,void 0,void 0,(function*(){console.log("Uploaded a blob or file!",t),"success"==t.state&&t&&t.ref&&(this.currentUpload=yield t.ref.getDownloadURL())}))))}copytoclip(t){t.select(),document.execCommand("copy"),t.setSelectionRange(0,0),this.currentUpload=""}update(){return Object(r.a)(this,void 0,void 0,(function*(){"yes"==prompt("Enter 'yes' ")&&("cat"==this.showWhat?s.a.firestore().collection("chocoshop").doc("digiCat").set(this.catData).then(t=>{console.log("val",t),alert("cat DONE "+t)}):"prod"==this.showWhat&&s.a.firestore().collection("chocoshop").doc("digiProd").set({data:this.prodData}).then(t=>{console.log("val",t),alert("prod DONE "+t)}))}))}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=a.Cb({type:t,selectors:[["app-update-view"]],decls:12,vars:6,consts:[["type","file","accept","image/*",3,"change"],[4,"ngIf"],["color","success",2,"width","49%"],["style","width:48%",3,"click",4,"ngIf"],["color","danger",2,"width","100%",3,"click"],[2,"font-size","8px"],["type","text",2,"position","absolute","top","-900px",3,"ngModel","ngModelChange"],["eleInp",""],["color","danger",3,"click"],[2,"width","48%",3,"click"],["type","text",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[2,"width","100%",3,"click"],["slot","start"],[3,"src"],[3,"ngModel","name","ngModelChange"],[3,"click"],[3,"value",4,"ngFor","ngForOf"],["type","number",3,"ngModel","name","ngModelChange"],[1,"warning",3,"click"],[1,"splitRed"],[3,"value"],["width","100%"],[1,"split"]],template:function(t,n){1&t&&(a.Lb(0,"input",0),a.Tb("change",(function(t){return n.filechange(t)})),a.Kb(),a.nc(1,y,7,2,"div",1),a.Lb(2,"ion-card"),a.Lb(3,"ion-button",2),a.pc(4,"Download Current Data"),a.Kb(),a.nc(5,M,2,0,"ion-button",3),a.nc(6,C,2,0,"ion-button",3),a.Lb(7,"ion-button",4),a.Tb("click",(function(){return n.update()})),a.pc(8,"Update Current Data"),a.Kb(),a.Kb(),a.nc(9,V,1,0,"ion-spinner",1),a.nc(10,I,16,3,"ion-content",1),a.nc(11,P,8,1,"ion-content",1)),2&t&&(a.xb(1),a.bc("ngIf",n.currentUpload&&""!=n.currentUpload),a.xb(4),a.bc("ngIf","cat"!=n.showWhat),a.xb(1),a.bc("ngIf","cat"==n.showWhat),a.xb(3),a.bc("ngIf",n.showSpin),a.xb(1),a.bc("ngIf",!n.showSpin&&"cat"==n.showWhat),a.xb(1),a.bc("ngIf",!n.showSpin&&"prod"==n.showWhat))},directives:[e.k,c.j,c.h,o.a,o.e,o.h,c.N,c.o,c.A,c.B,c.y,c.z,e.j,c.d,o.k,o.j,o.i,o.l],styles:[".split[_ngcontent-%COMP%]{background-color:#00f}.split[_ngcontent-%COMP%], .splitRed[_ngcontent-%COMP%]{height:15px;width:100%}.splitRed[_ngcontent-%COMP%]{background-color:red}"]}),t})();function F(t,n){if(1&t){const t=a.Mb();a.Lb(0,"ion-item"),a.Lb(1,"ion-button",3),a.Tb("click",(function(){a.ic(t);const n=a.Vb();return n.histView=!n.histView})),a.pc(2,"Update Products"),a.Kb(),a.Kb()}}function J(t,n){if(1&t){const t=a.Mb();a.Lb(0,"ion-item"),a.Lb(1,"ion-button",3),a.Tb("click",(function(){a.ic(t);const n=a.Vb();return n.histView=!n.histView})),a.pc(2,"View Orders"),a.Kb(),a.Kb()}}function z(t,n){1&t&&a.Jb(0,"app-all-orders")}function U(t,n){1&t&&a.Jb(0,"app-update-view")}const j=[{path:"",component:(()=>{class t{constructor(){this.histView=!0}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=a.Cb({type:t,selectors:[["app-manager"]],decls:12,vars:4,consts:[["slot","start"],["defaultHref","home"],[4,"ngIf"],[2,"width","100%","font-size","16px",3,"click"]],template:function(t,n){1&t&&(a.Lb(0,"ion-header"),a.Lb(1,"ion-toolbar"),a.Lb(2,"ion-buttons",0),a.Jb(3,"ion-back-button",1),a.Kb(),a.Lb(4,"ion-title"),a.pc(5,"Manager"),a.Kb(),a.Kb(),a.Kb(),a.Lb(6,"ion-content"),a.Lb(7,"ion-list"),a.nc(8,F,3,0,"ion-item",2),a.nc(9,J,3,0,"ion-item",2),a.Kb(),a.nc(10,z,1,0,"app-all-orders",2),a.nc(11,U,1,0,"app-update-view",2),a.Kb()),2&t&&(a.xb(8),a.bc("ngIf",n.histView),a.xb(1),a.bc("ngIf",!n.histView),a.xb(1),a.bc("ngIf",n.histView),a.xb(1),a.bc("ngIf",!n.histView))},directives:[c.t,c.U,c.i,c.e,c.f,c.T,c.o,c.A,e.k,c.y,c.h,v,$],styles:[""]}),t})()}];let S=(()=>{class t{}return t.\u0275mod=a.Gb({type:t}),t.\u0275inj=a.Fb({factory:function(n){return new(n||t)},imports:[[b.j.forChild(j)],b.j]}),t})(),q=(()=>{class t{}return t.\u0275mod=a.Gb({type:t}),t.\u0275inj=a.Fb({factory:function(n){return new(n||t)},imports:[[e.b,o.b,c.V,S]]}),t})()}}]);